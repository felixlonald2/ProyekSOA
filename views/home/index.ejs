<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .container{
            width: 100%;
            height: 8100px;
        }
        ul {
            list-style-type: none;
            width: 98%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: orangered;
            position: absolute;
            top: 100px;
        }
        li {
            float: left;
        }
        li a {
        display: block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        }

        li a:hover:not(.active) {
        background-color: #111;
        }

        #judul{
            font-size: 40px;
            font-family: 'Baloo Paaji 2', cursive;
            margin-left: 43%;
        }
        #pembatas{
            width: 80%;
            height: 2px;
            background-color: gainsboro;
            margin-top: 200px;
            margin-left: 10%;
        }
        #kotakberita{
            width: 100%;
            height: 300px;
            margin-top: 60px;
        }
        #judulberita{
            font-size: 20px;
            font-family: 'Baloo Paaji 2', cursive;
            margin-left: 420px;
            color: black;
        }
        #deskripsiberita{
            font-size: 12px;
            font-family: monospace;
            margin-left: 420px;
            margin-top: 50px;
            color: grey;
        }
        #waktuberita{
            font-size: 12px;
            font-family: monospace;
            margin-left: 420px;
            margin-top: 50px;
            color: grey;
        }
        #authorberita{
            font-size: 12px;
            font-family: monospace;
            margin-left: 420px;
            margin-top: 20px;
            color: grey;
        }
        #fotoberita{
            float: left;
        }
        #search{
            position: absolute;
            left: 140px;
            top: 200px;
        }

    </style>
</head>
<body>
    
    <div class="container">
        
        <form action="http://localhost:3000/" method="GET"> 
            <input type="submit" value="Back" style="position:absolute; left:20px;top: 20px;">
        </form>

        <div id="judul">World News</div>
        <div id="pembatas"></div>


        <ul>
            <li><a href="#about" onclick="box1()">Business</a></li>
            <li><a href="#news" onclick="box2()">Entertainment</a></li>
            <li><a href="#contact" onclick="box3()">General</a></li>
            <li><a href="#about" onclick="box4()">Health</a></li>
            <li><a href="#about" onclick="box5()">Science</a></li>
            <li><a href="#about" onclick="box6()">Sport</a></li>
            <li><a href="#about" onclick="box7()">Technology</a></li>
        </ul>

        <div id="search">
            <form action="http://localhost:3000/api/search" method="POST"> 
                Search : <input type="text" name="key" >
                Sort by : 
                <select name="sort">
                    <option value="relevancy">Relevancy</option>
                    <option value="popularity">Popularity</option>
                    <option value="publishedAt">Published at</option>
                </select>
                <input type="submit" value="Search" style="margin-left: 20px;margin-top: 20px;">
            </form>
        </div>
        

        

        <% if(data) { %>
            <% data.forEach(d => {  %>
                <div id="kotakberita">
                    
                    <div id="fotoberita"><img src="<%= d.urlToImage %>" style="width: 390px;height: 300px;border-style: ridge;"></div>
                    
                    <div id="judulberita"><%= d.title %></div>
                    <div id="deskripsiberita"><%= d.description %></div>
                    <% 
                        var publish = d.publishedAt; 
                        var tahun = publish.substring(0,4);
                        var bulanAngka = publish.substring(5,7);
                        var tanggal = publish.substring(8,10);
                        var bulan ="";

                        if(bulanAngka=="01"){
                            bulan="January";
                        }
                        if(bulanAngka=="02"){
                            bulan="February";
                        }
                        if(bulanAngka=="03"){
                            bulan="March";
                        }
                        if(bulanAngka=="04"){
                            bulan="April";
                        }
                        if(bulanAngka=="05"){
                            bulan="May";
                        }
                        if(bulanAngka=="06"){
                            bulan="June";
                        }
                        if(bulanAngka=="07"){
                            bulan="July";
                        }
                        if(bulanAngka=="08"){
                            bulan="August";
                        }
                        if(bulanAngka=="09"){
                            bulan="September";
                        }
                        if(bulanAngka=="10"){
                            bulan="October";
                        }
                        if(bulanAngka=="11"){
                            bulan="November";
                        }
                        if(bulanAngka=="12"){
                            bulan="December";
                        }

                        var jam=publish.substring(11,16);

                        
                        var waktu = tanggal+" "+bulan+" "+tahun+", "+jam;

                        var judul = d.title;
                    %>

                    <form action="http://localhost:3000/api/detail" method="POST"> 
                        <input type="submit" value="Read More" style="margin-left: 20px;margin-top: 20px;">
                        <input type="hidden" name="judul" value="<%= judul %>">
                    </form>

                    <div id="waktuberita">Published on : <%= waktu %></div>
                    <div id="authorberita">Author : <%= d.author %></div>
                </div>
            <% }); %>
        <% } %>
    </div>
</body>
</html>

<script src="jquery-3.2.1.min.js" type="text/javascript"></script>
<script>
    function box1(){
        var filter="business"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box2(){
        var filter="entertainment"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box3(){
        var filter="general"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box4(){
        var filter="health"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box5(){
        var filter="science"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box6(){
        var filter="sport"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }
    function box7(){
        var filter="technology"
        window.location.href = `http://localhost:3000/api/filter/${filter}`;
    }

</script>